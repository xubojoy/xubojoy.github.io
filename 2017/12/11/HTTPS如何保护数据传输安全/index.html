<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>HTTPS如何保护数据传输安全 | 枫林飘雪</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="HTTPS随着互联网整体的发展， HTTPS 也被越来越多的应用。 甚至苹果去年还曾经放言要强制所有的 APP 都使用 HTTPS，可见在如今的互联网它的重要性。 那么问题来了，为什么这么多大公司都在积极推进 HTTPS 呢，它和我们平时更多使用的 HTTP 协议究竟有什么区别呢？ 我用最简单的话语跟大家聊一聊。">
<meta name="keywords" content="服务器">
<meta property="og:type" content="article">
<meta property="og:title" content="HTTPS如何保护数据传输安全">
<meta property="og:url" content="http://xubojoy.cn/2017/12/11/HTTPS如何保护数据传输安全/index.html">
<meta property="og:site_name" content="枫林飘雪">
<meta property="og:description" content="HTTPS随着互联网整体的发展， HTTPS 也被越来越多的应用。 甚至苹果去年还曾经放言要强制所有的 APP 都使用 HTTPS，可见在如今的互联网它的重要性。 那么问题来了，为什么这么多大公司都在积极推进 HTTPS 呢，它和我们平时更多使用的 HTTP 协议究竟有什么区别呢？ 我用最简单的话语跟大家聊一聊。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://xubojoy.cn/2017/12/11/HTTPS如何保护数据传输安全/dev.jpg">
<meta property="og:image" content="http://xubojoy.cn/2017/12/11/HTTPS如何保护数据传输安全/预置证书匹配.jpg">
<meta property="og:updated_time" content="2017-12-12T10:14:21.995Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="HTTPS如何保护数据传输安全">
<meta name="twitter:description" content="HTTPS随着互联网整体的发展， HTTPS 也被越来越多的应用。 甚至苹果去年还曾经放言要强制所有的 APP 都使用 HTTPS，可见在如今的互联网它的重要性。 那么问题来了，为什么这么多大公司都在积极推进 HTTPS 呢，它和我们平时更多使用的 HTTP 协议究竟有什么区别呢？ 我用最简单的话语跟大家聊一聊。">
<meta name="twitter:image" content="http://xubojoy.cn/2017/12/11/HTTPS如何保护数据传输安全/dev.jpg">
  
    <link rel="alternate" href="/atom.xml" title="枫林飘雪" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">枫林飘雪</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">成事不说，遂事不谏，既往不咎!   继续修行！！！</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://xubojoy.cn"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-HTTPS如何保护数据传输安全" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/12/11/HTTPS如何保护数据传输安全/" class="article-date">
  <time datetime="2017-12-11T10:55:17.000Z" itemprop="datePublished">2017-12-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/服务器/">服务器</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      HTTPS如何保护数据传输安全
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h4><p>随着互联网整体的发展， HTTPS 也被越来越多的应用。 甚至苹果去年还曾经放言要强制所有的 APP 都使用 HTTPS，可见在如今的互联网它的重要性。</p>
<p>那么问题来了，为什么这么多大公司都在积极推进 HTTPS 呢，它和我们平时更多使用的 HTTP 协议究竟有什么区别呢？ 我用最简单的话语跟大家聊一聊。</p>
<a id="more"></a>
<h4 id="HTTP-明文传输"><a href="#HTTP-明文传输" class="headerlink" title="HTTP 明文传输"></a>HTTP 明文传输</h4><p>先从 HTTP 说起，我们过去使用的 HTTP 协议，最大的问题就是，它是明文传输的。因为当时的互联网还只是简单的信息发布，所以明文传输在那个时代并没有太大问题。但随着网络应用越来越复杂，简单的明文传输所带来的问题就显现出来了。</p>
<p>其中一个最突出的问题就是信息劫持。什么叫做劫持呢？简单来说，以我们现在所使用的互联网架构，在发送和接受一条网络请求时，并不是直接发送到目标主机的，而是要经过中间很多个路由器，才能到达主机。</p>
<p>因为 HTTP 是明文传输的，那么所有中间经过的路由器都可以看到你的信息，还可以修改你的信息。假如你请求一个网站，网站的主机给你返回它的主页，一段 HTML 信息：</p>
<pre><code>&lt;html&gt;
&lt;title&gt;Hello&lt;/title&gt;
&lt;body&gt;
    Hello world.
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>网站服务器发回给用户的这个信息不是直接到达他机器的，在这中间要经过很多路由器，如果中途经过的某个路由器使坏，对这条信息做了修改， 然后把修改后的内容转发给下一个路由器：</p>
<pre><code>&lt;html&gt;
&lt;title&gt;Hello&lt;/title&gt;
&lt;body&gt;
    Hello world.
    &lt;ad&gt;这是一条广告&lt;/ad&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>比如像上面这样，最终传输到用户设备上的主页就被恶意加入了一条广告。 而这一切，对用户来说是毫无感知的，这就是信息劫持的一个例子。像这种注入广告还算比较轻微的。如果更严重的甚至会窃取你的个人信息。</p>
<h4 id="HTTPS-如何解决"><a href="#HTTPS-如何解决" class="headerlink" title="HTTPS 如何解决"></a>HTTPS 如何解决</h4><p>既然说明了 HTTP 的这个问题，那么我们就再来看看 HTTPS 是如何解决这个问题的。由于篇幅原因，我们只用最简单的语言描述，背后的原理和机制如果都讲清楚就需要比较大的篇幅了。</p>
<p>如果让我们来想，保证信息传输不被恶意篡改的话，会用什么方法呢？ 最容易想到的应该就是对信息进行加密后再传输了。其实 HTTPS 也是基于这个原理的， 只是机制更加完善。</p>
<p>先来从加密说起，常用的加密算法有对称加密和非对称加密。对称加密就是用一个秘钥，进行加密和解密。 非对称加密就是加密的时候用一个秘钥，解密的时候用另一个秘钥。</p>
<p>从我这个描述上来看，是不是非对称加密会更安全一些呢？ 那为什么还会有对称加密的存在呢？ 因为性能。非对称加密要比对称加密更加消耗计算性能。</p>
<p>使用加密算法可以加强传输过程的安全性，但单纯的加密还是不够的。为什么这么说呢，如果你开发的是一个 APP 客户端，这样的设计勉强够用，在你的服务器和客户端上面用同样的秘钥对信息加密和解密就可以让传输安全得到很大的提升。但你要保护好你的秘钥，不被泄露。</p>
<p>但如果你开发的是一个 Web 程序，那这种机制几乎就没办法使用了。因为访问你服务的是浏览器，而不是受你控制的客户端。你没有办法让一个通用浏览器来适配你服务器的特殊加密规则。所以这时候就需要一个更加标准化的传输加密协议，也就是 HTTPS 了。</p>
<h4 id="HTTPS-实现原理"><a href="#HTTPS-实现原理" class="headerlink" title="HTTPS 实现原理"></a>HTTPS 实现原理</h4><p>HTTPS 相比于普通的加密传输，最根本的区别就是用于加密传输内容的秘钥是随机的。但 HTTPS 是怎么做到的呢？ 总部能把秘钥直接发送给对方吧，因为只要发送，就可能被中间路由器截获。秘钥如果被截获，整个加密算法也就没有意义了。</p>
<p>HTTPS 使用了更聪明的做法，引入了一个叫做数字证书的机制。简单来说，每个支持 HTTPS 的服务端，都会申请一个 SSL 证书。这个证书一般是从专业的证书颁发机构申请。</p>
<p>我们平时访问 HTTPS 网站的时候，浏览器地址栏一般会出现一个小锁头，点击这个小锁头就可以查看证书信息， 我们来看 苹果开发者中心 的证书：<br><img src="/2017/12/11/HTTPS如何保护数据传输安全/dev.jpg" alt=""><br>它的证书颁发机构是 GeoTrust。 为什么一定要从这些颁发机构申请证书呢？ 原因是 HTTPS 的证书链校验机制。比如我们请求 苹果开发者中心 的网站，它会先把证书信息发给我们的客户端。 然后我们客户端会做一个叫做证书链校验的操作。</p>
<p>所谓证书链校验，其实就是这样，每个证书都包含一个数字签名，用这个数字签名经过一系列算法，就可以匹配到上一级证书的签名，按照这个算法一直往上延伸，就可以匹配到最顶层证书的签名。就像上面 苹果开发者中心 那个证书的截图一样，证书是一级一级的树形结构。</p>
<p>匹配到最顶层证书有什么用呢？ 答案是我们的客户端会预置这些顶层证书，比如打开你的 mac 电脑的钥匙串程序，你会看到这样的内容：<br><img src="/2017/12/11/HTTPS如何保护数据传输安全/预置证书匹配.jpg" alt=""><br>我们平时使用的设备都会预置这些证书颁发机构的根证书。还回到前面讨论的证书校验的讨论，当逐级网上找到根证书后，就会和我们预置的这些证书进行匹配，如果能找到相同的，就代表网站发给我们的证书是可信的。否则这个网站就不可信。</p>
<p>这就解释了为什么我们需要从证书颁发机构申请证书了，因为只有证书颁发机构才可以生成它们根证书下面的子证书，生成子证书需要私钥，只有证书颁发机构才有自己的私钥。</p>
<p>说了这么多证书，到底数字证书有什么用呢？ 它的作用其中一个是标识网站的身份，这个我们稍后会再详细介绍。</p>
<h4 id="交换秘钥"><a href="#交换秘钥" class="headerlink" title="交换秘钥"></a>交换秘钥</h4><p>如果证书验证通过了，就会开始一个交换秘钥的过程。 服务端发给客户端的证书，除了包含上述的验证信息，还包含了证书的公钥。 客户端验证证书有效后，就会发送给服务端一条消息，表明当前客户端可以接受的加密算法等信息，这条信息使用证书给我们的公钥加密传输。</p>
<p>服务端接收到这条消息后，因为它拥有证书的私钥，所以它可以用私钥将信息解密出来。因为私钥不会传输，所以只要不发生其他方式的泄露，理论上只有服务端才可能对这条消息解密。 保证了这条消息的安全性。</p>
<p>服务端知道客户端可以接受哪些加密算法后，就会生成一个针对这些算法的对称秘钥，是的，对称秘钥。然后再用自己的私钥把对称秘钥加密后返回给客户端。</p>
<p>同样，客户端得到这条消息，还会用之前收到的证书公钥再解密，得到这个对称秘钥。 到此为止 HTTPS 的握手过程就完成了。</p>
<p>接下来，客户端就可以用这个对称秘钥给服务端发送消息了。</p>
<h4 id="流程梳理"><a href="#流程梳理" class="headerlink" title="流程梳理"></a>流程梳理</h4><p>上面说了这么多，大家或许会有疑惑，再一起梳理一下。 HTTPS 在交换证书和秘钥信息的时候，使用的是非对称加密。 而在真正的信息传输时，使用的是对称加密。</p>
<p>为什么在传输信息时使用对称加密呢，主要还是性能考虑。对于客户端来说对请求信息进行加解密的开销还是有限的。但如果到了服务端，着他机器要对它处理的所有请求都进行加解密，就会造成很大的性能开销了。</p>
<p>这也是为什么都说 HTTPS 的性能要比 HTTP 消耗大的原因了。它额外处理大量的加密和解密的工作。</p>
<p>HTTPS 是如何防止中间路由器劫持的呢？ 首先就是证书，因为证书的私钥是不会传输的，所以理论上只有服务端自己才会知道私钥。只要这个私钥不被泄露，那么其他的中间人就不可能解密信息。</p>
<p>证书交换的过程无法被解密，那么对称秘钥在传输过程中就不会被破解。所以在传输信息的时候就可以保证信息的安全了。</p>
<p>当然， HTTPS 并不是绝对安全的。比如我们上面说的，如果服务端自己的证书私钥被泄露了，那么中间路由器就可以解密你们秘钥交换时的信息，就可以破解加密传输了。</p>
<p>更严重的是，根证书的秘钥被泄露。 根证书的秘钥都是保存在证书颁发机构手中。如果这些秘钥被泄露，就可以用它们随意签发合法的子证书，这样中间路由器就可以根本不用转发你的请求，直接返回给你任何恶意信息，而这时候你完全感知不到。</p>
<p>根证书秘钥泄露的事情在现实中确实发生过，所以大家选一个靠谱的证书签发机构，也是保护自己信息传输安全的必备行动。关于 HTTPS 就跟大家聊这么多，我这里说的肯定不是最详细的，但如果你从未了解过这些机制，应该会对你有些用处。</p>
<h3 id="为什么使用了https还是可以被抓包？"><a href="#为什么使用了https还是可以被抓包？" class="headerlink" title="为什么使用了https还是可以被抓包？"></a>为什么使用了https还是可以被抓包？</h3><p>1.https的加密没有安全问题，但它只是用来防止通信过程中被第三方获取明文。如果黑客能直接控制通信的双方（你的电脑，或服务器)，那么黑客肯定能看到https明文的。</p>
<p>2.所以，你用charles之所以能看到https明文，是因为你允许了charles在你的电脑上做手脚，关键就是你同意charles在你电脑上安装证书。</p>
<p>3.具体一点，charles通过使用了https代理功能，来完成查看https明文的目的，也就是SSL中间人攻击。简单来说，你并不是直接与https的另一端通信，而是与charles通信，charles再与另一端通信，这种结构下，charles才能看到通信明文。这个问题的原理比较复杂，涉及到整套RSA系统，想了解原理的话，建议去看【信息安全】相关书籍，但这类书籍的门槛非常高。另外Fiddle也有这个功能，而且原理也一样。</p>
<h4 id="文章出自：都在谈论的-HTTPS，究竟它是如何保护数据传输安全的呢？"><a href="#文章出自：都在谈论的-HTTPS，究竟它是如何保护数据传输安全的呢？" class="headerlink" title="文章出自：都在谈论的 HTTPS，究竟它是如何保护数据传输安全的呢？"></a>文章出自：<a href="http://www.sohu.com/a/127124665_487516" target="_blank" rel="noopener">都在谈论的 HTTPS，究竟它是如何保护数据传输安全的呢？</a></h4>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://xubojoy.cn/2017/12/11/HTTPS如何保护数据传输安全/" data-id="cjs1enehf00072ks69tt3k4cl" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/服务器/">服务器</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/12/12/AFNetworking系列之-对比AFNetwork-3-x-与-AFNetwork-2-x/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          AFNetworking系列之--对比AFNetwork 3.x 与 AFNetwork 2.x
        
      </div>
    </a>
  
  
    <a href="/2017/12/11/浅析DES与AES、RSA三种典型加密算法的比较/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">浅析DES与AES、RSA三种典型加密算法的比较</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ios/">ios</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/">数据库</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/服务器/">服务器</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活/">生活</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/随笔/">随笔</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ios/">ios</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库/">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/服务器/">服务器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/生活/">生活</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/随笔/">随笔</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Python/" style="font-size: 13.33px;">Python</a> <a href="/tags/ios/" style="font-size: 20px;">ios</a> <a href="/tags/数据库/" style="font-size: 10px;">数据库</a> <a href="/tags/服务器/" style="font-size: 16.67px;">服务器</a> <a href="/tags/生活/" style="font-size: 16.67px;">生活</a> <a href="/tags/随笔/" style="font-size: 10px;">随笔</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/01/29/新年来场与-面试-有关的约会/">新年来场与&#39;面试&#39;有关的约会</a>
          </li>
        
          <li>
            <a href="/2019/01/01/写在2019年的开端/">写在2019年的开端</a>
          </li>
        
          <li>
            <a href="/2018/11/27/解决Xcode10-import不提示问题/">解决Xcode10 #import不提示问题</a>
          </li>
        
          <li>
            <a href="/2018/11/01/使用shell脚本打包IPA，导出并上传到蒲公英/">使用shell脚本打包IPA，导出并上传到蒲公英</a>
          </li>
        
          <li>
            <a href="/2018/08/13/SDWebImage原理和缓存机制/">SDWebImage原理和缓存机制</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 枫林飘雪<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>